<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Previsão de Temperatura</title>
  <script type="module">
    import { Client } from "https://esm.sh/@gradio/client";

    document.addEventListener("DOMContentLoaded", async () => {
      const client = await Client.connect("https://1cbaed2de9788ebe6c.gradio.live/");
      const btn = document.getElementById("prever");

      btn.addEventListener("click", async () => {
        const precipitacao = parseFloat(document.getElementById("precipitacao").value);
        const pressao = parseFloat(document.getElementById("pressao").value);
        const umidade = parseFloat(document.getElementById("umidade").value);
        const hora = parseInt(document.getElementById("hora").value);
        const mes = parseInt(document.getElementById("mes").value);

        const result = await client.predict("/predict", {
          precipitacao,
          pressao,
          umidade,
          hora,
          mes
        });

        document.getElementById("resultado").textContent = `Temperatura Prevista: ${result.data[0]} °C`;
        console.log(result.data);
        // Mostra os gráficos (esperando que sejam imagens base64 ou URLs de imagens)
        const plot1 = result.data[1].plot;
        const plot2 = result.data[2].plot;
        const plot3 = result.data[3].plot;

        document.getElementById("grafico1").src = plot1;
        document.getElementById("grafico2").src = plot2;
        document.getElementById("grafico3").src = plot3;
      });
    });
  </script>
</head>
<body style="font-family: sans-serif; margin: 2rem;">
  <h1>Previsão de Temperatura com Random Forest</h1>

  <label>Precipitação (mm): <input type="range" id="precipitacao" min="0" max="50" value="0" step="1"></label><br><br>
  <label>Pressão (mB): <input type="range" id="pressao" min="900" max="1050" value="900" step="1"></label><br><br>
  <label>Umidade (%): <input type="range" id="umidade" min="0" max="100" value="0" step="1"></label><br><br>
  <label>Hora do dia: <input type="range" id="hora" min="0" max="23" value="0" step="1"></label><br><br>
  <label>Mês: <input type="range" id="mes" min="1" max="12" value="1" step="1"></label><br><br>

  <button id="prever">Prever Temperatura</button>
  <p id="resultado" style="font-weight: bold; font-size: 1.2rem;"></p>

  <h2>Gráficos</h2>
  <div>
    <h3>Previsão Real x Prevista</h3>
    <img id="grafico1" style="max-width: 100%;" />
  </div>
  <div>
    <h3>Importância das Variáveis</h3>
    <img id="grafico2" style="max-width: 100%;" />
  </div>
  <div>
    <h3>Distribuição do Erro</h3>
    <img id="grafico3" style="max-width: 100%;" />
  </div>
</body>
</html>
